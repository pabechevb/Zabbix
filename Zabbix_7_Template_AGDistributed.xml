<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>7.0</version>
    <template_groups>
        <template_group>
            <uuid>748ad4d098d447d492bb935c907f652f</uuid>
            <name>Templates/Databases</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>dd8fb7ba9a674945b9c519f0a5e04e47</uuid>
            <template>AG Distributed</template>
            <name>AG Distributed</name>
            <groups>
                <group>
                    <name>Templates/Databases</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>cf0954d7b4af4a4283272f23b1c49ff8</uuid>
                    <name>AG Distributed</name>
                    <key>mssql.custom.query[{$MSSQL.URI},{$MSSQL.USER},{$MSSQL.PASSWORD},AGDistributed]</key>
                    <value_type>TEXT</value_type>
                    <trends>0</trends>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <uuid>f9fbfd80613c4cac9ae050e52a502a33</uuid>
                    <name>AG Distributed</name>
                    <type>DEPENDENT</type>
                    <key>ag.distributed</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>b011f11a42574825ad5dbf5fcda3eab8</uuid>
                            <name>Synchronization health of {#AGNAME} {#REPLICASERVERNAME} {#DATABASE}</name>
                            <type>DEPENDENT</type>
                            <key>synchronization_health[{#AGNAME}-{#REPLICASERVERNAME}-{#DATABASE}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.AG_Name == &quot;{#AGNAME}&quot; &amp;&amp; @.replica_server_name == &quot;{#REPLICASERVERNAME}&quot; &amp;&amp; @.Database == &quot;{#DATABASE}&quot;)].synchronization_health.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>mssql.custom.query[{$MSSQL.URI},{$MSSQL.USER},{$MSSQL.PASSWORD},AGDistributed]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>f87db457a0d849b99f4d4af7a531df3c</uuid>
                                    <expression>last(/AG Distributed/synchronization_health[{#AGNAME}-{#REPLICASERVERNAME}-{#DATABASE}])&lt;&gt;2</expression>
                                    <name>Synchronization health of {#AGNAME} {#REPLICASERVERNAME} {#DATABASE}</name>
                                    <priority>DISASTER</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>mssql.custom.query[{$MSSQL.URI},{$MSSQL.USER},{$MSSQL.PASSWORD},AGDistributed]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#AGNAME}</lld_macro>
                            <path>$.AG_Name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#DATABASE}</lld_macro>
                            <path>$.Database</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#REPLICASERVERNAME}</lld_macro>
                            <path>$.replica_server_name</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                </discovery_rule>
            </discovery_rules>
            <dashboards>
                <dashboard>
                    <uuid>92390e66265e4f3f8b3cba34c4002b81</uuid>
                    <name>AG Distributed</name>
                    <auto_start>NO</auto_start>
                    <pages>
                        <page>
                            <widgets>
                                <widget>
                                    <type>svggraph</type>
                                    <name>PRIMARY PRIMARY</name>
                                    <width>36</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.color</name>
                                            <value>FF465C</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.items.0</name>
                                            <value>Synchronization health of PRIMARY PRIMARY *</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.pointsize</name>
                                            <value>4</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.type</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>reference</name>
                                            <value>OJFXE</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>righty</name>
                                            <value>0</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>severities.0</name>
                                            <value>5</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>show_problems</name>
                                            <value>1</value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>svggraph</type>
                                    <name>SECONDARY PRIMARY</name>
                                    <y>5</y>
                                    <width>36</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.color</name>
                                            <value>FF465C</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.items.0</name>
                                            <value>Synchronization health of SECONDARY PRIMARY *</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.pointsize</name>
                                            <value>4</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.type</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>reference</name>
                                            <value>XRPXP</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>righty</name>
                                            <value>0</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>severities.0</name>
                                            <value>5</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>show_problems</name>
                                            <value>1</value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>svggraph</type>
                                    <name>PRIMARY SECONDARY</name>
                                    <x>36</x>
                                    <width>36</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.color</name>
                                            <value>FF465C</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.items.0</name>
                                            <value>Synchronization health of PRIMARY SECONDARY *</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.pointsize</name>
                                            <value>4</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.type</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>reference</name>
                                            <value>VSZEV</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>righty</name>
                                            <value>0</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>severities.0</name>
                                            <value>5</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>show_problems</name>
                                            <value>1</value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>svggraph</type>
                                    <name>SECONDARY SECONDARY</name>
                                    <x>36</x>
                                    <y>5</y>
                                    <width>36</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.color</name>
                                            <value>FF465C</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>ds.0.items.0</name>
                                            <value>Synchronization health of SECONDARY SECONDARY *</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.pointsize</name>
                                            <value>4</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>ds.0.type</name>
                                            <value>1</value>
                                        </field>
                                        <field>
                                            <type>STRING</type>
                                            <name>reference</name>
                                            <value>XBFUJ</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>righty</name>
                                            <value>0</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>severities.0</name>
                                            <value>5</value>
                                        </field>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>show_problems</name>
                                            <value>1</value>
                                        </field>
                                    </fields>
                                </widget>
                            </widgets>
                        </page>
                    </pages>
                </dashboard>
            </dashboards>
        </template>
    </templates>
</zabbix_export>
